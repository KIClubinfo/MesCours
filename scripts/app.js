
/**
  @ngdoc module
  @name edt-demo
  @module edt-demo
  @description

  This module requires all submodules of your app
 */
angular.module('edt-demo', ['ngMaterial', 'edt-demo.utils', 'edt-demo.edt']);


/**
  @ngdoc module
  @name edt-demo.landing
  @module edt-demo.landing
  @description

  Landing page of the application.
 */
angular.module('edt-demo.edt', ['ng', 'ui.router', 'pascalprecht.translate']);


/**
  @ngdoc module
  @name boilerplate.utils
  @module boilerplate.utils
  @description

  This module contains helpers and global configuration required by your app
 */
angular.module('edt-demo.utils', ['ng', 'ui.router', 'pascalprecht.translate']);

angular.module('edt-demo.edt').constant('BASE_API_URL', 'http://api-edt-ponts.securem.eu/');

angular.module('edt-demo.edt').config(function($stateProvider) {
  return $stateProvider.state('edt', {
    url: '/?dep',
    controller: 'CourseListCtrl',
    templateUrl: 'edt/views/view.html'
  });
});

angular.module('edt-demo.edt').config(function($translateProvider) {
  $translateProvider.translations('en', {
    HOME_TITLE: 'Welcome',
    HOME_TEXT: 'This is the beginning of an extraordinary app...'
  });
  return $translateProvider.translations('fr', {
    HOME_TITLE: 'Bienvenue',
    HOME_TEXT: 'Ceci est le commencement d\'une appli extraordinaire...'
  });
});

angular.module('edt-demo.edt').controller('CourseListCtrl', function($scope, $stateParams, $mdDialog, CourseFactory, DepartmentListExtractor) {
  var alertNoNetwork;
  $scope.currentDepartment = null;
  $scope.currentDate = new Date();
  $scope.errorNoNetwork = false;
  alertNoNetwork = $mdDialog.alert().title('Erreur réseau').content('Impossible de récupérer la liste des cours !').ariaLabel('Network error').ok('Dommage :(');
  $scope.loadCourses = function() {
    return CourseFactory.findAll().success(function(data) {
      $scope.errorNoNetwork = false;
      $scope.courses = data;
      console.log("Found " + $scope.courses.length + " courses");
      $scope.departments = DepartmentListExtractor.extract($scope.courses);
      console.log("Found " + $scope.departments.length + " departments");
      return $scope.currentDepartment = $stateParams.dep;
    }).error(function() {
      $mdDialog.show(alertNoNetwork);
      return $scope.errorNoNetwork = true;
    });
  };
  $scope.departmentFilter = function(course) {
    return !$scope.currentDepartment || course.department === $scope.currentDepartment;
  };
  $scope.pastCourseFilter = function(course) {
    return !$scope.prefs.hidePastCourses || course.time_end > $scope.currentDate;
  };
  return $scope.loadCourses();
});

angular.module('edt-demo.edt').controller('ParametersCtrl', function($scope, $stateParams, $mdDialog, $mdSidenav, $timeout) {
  var hidePastCourses;
  $scope.prefs = hidePastCourses = false;
  return $scope.toggleSidebar = function() {
    return $mdSidenav('left').toggle();
  };
});

angular.module('edt-demo.edt').factory('CourseFactory', function($rootScope, $http, BASE_API_URL) {
  var findAll, findByDepartment;
  findAll = function(date) {
    var params;
    if (date == null) {
      date = null;
    }
    params = {
      date: date || moment().format('DD/MM/YYYY')
    };
    return $http({
      method: 'GET',
      url: BASE_API_URL + 'courses',
      params: params
    }).success(function(data) {
      return data;
    });
  };
  findByDepartment = function(departmentCode, date) {
    var params;
    if (date == null) {
      date = null;
    }
    params = {
      date: date || moment().format('DD/MM/YYYY'),
      department: departmentCode
    };
    return $http({
      method: 'GET',
      url: BASE_API_URL + 'courses',
      params: params
    }).success(function(data) {
      return data;
    });
  };
  return {
    findAll: findAll,
    findByDepartment: findByDepartment
  };
});

angular.module('edt-demo.edt').service('DepartmentListExtractor', function() {
  var extract;
  extract = function(courses) {
    var course, departments, _i, _len;
    departments = [];
    for (_i = 0, _len = courses.length; _i < _len; _i++) {
      course = courses[_i];
      if (departments.indexOf(course.department) === -1) {
        departments.push(course.department);
      }
    }
    return departments;
  };
  return {
    extract: extract
  };
});

angular.module('edt-demo.utils').config(function($translateProvider) {
  $translateProvider.fallbackLanguage('en');
  return $translateProvider.determinePreferredLanguage();
});

angular.module('edt-demo.utils').config(function($locationProvider) {
  $locationProvider.html5Mode(true);
  return $locationProvider.hashPrefix('!');
});


/**
  @ngdoc object
  @name storage
  @module edt-demo.utils
  @description

  This value object is an application-wide data-store.
  It's published in `$rootScope` for easy-access in views.
 */
angular.module('edt-demo.utils').value('storage', {}).run(function($rootScope, storage) {
  return $rootScope.storage = storage;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uY29mZmVlIiwiZWR0L21vZHVsZS5jb2ZmZWUiLCJ1dGlscy9tb2R1bGUuY29mZmVlIiwiZWR0L2NvbmZpZy9jb25maWcuY29mZmVlIiwiZWR0L2NvbmZpZy9yb3V0ZXMuY29mZmVlIiwiZWR0L2NvbmZpZy90cmFuc2xhdGlvbnMuY29mZmVlIiwiZWR0L2NvbnRyb2xsZXJzL2NvdXJzZV9saXN0LmNvZmZlZSIsImVkdC9jb250cm9sbGVycy9wYXJhbWV0ZXJzLmNvZmZlZSIsImVkdC9zZXJ2aWNlcy9jb3Vyc2VfZmFjdG9yeS5jb2ZmZWUiLCJlZHQvc2VydmljZXMvZGVwYXJ0bWVudF9saXN0X2V4dHJhY3Rvci5jb2ZmZWUiLCJ1dGlscy9jb25maWcvaW5pdC10cmFuc2xhdGlvbnMuY29mZmVlIiwidXRpbHMvY29uZmlnL2luaXQtdXJscy5jb2ZmZWUiLCJ1dGlscy9jb25maWcvc3RvcmFnZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTs7Ozs7OztHQUFBO0FBQUEsT0FTTyxDQUFDLE1BQVIsQ0FBZ0IsVUFBaEIsRUFBMkIsQ0FDeEIsWUFEd0IsRUFFeEIsZ0JBRndCLEVBR3hCLGNBSHdCLENBQTNCLENBVEEsQ0FBQTs7QUNBQTtBQUFBOzs7Ozs7O0dBQUE7QUFBQSxPQVNPLENBQUMsTUFBUixDQUFnQixjQUFoQixFQUErQixDQUM1QixJQUQ0QixFQUU1QixXQUY0QixFQUc1Qix3QkFINEIsQ0FBL0IsQ0FUQSxDQUFBOztBQ0FBO0FBQUE7Ozs7Ozs7R0FBQTtBQUFBLE9BU08sQ0FBQyxNQUFSLENBQWdCLGdCQUFoQixFQUFpQyxDQUM5QixJQUQ4QixFQUU5QixXQUY4QixFQUc5Qix3QkFIOEIsQ0FBakMsQ0FUQSxDQUFBOztBQ0FBLE9BQU8sQ0FBQyxNQUFSLENBQWdCLGNBQWhCLENBQ0EsQ0FBQyxRQURELENBQ1csY0FEWCxFQUMyQixrQ0FEM0IsQ0FBQSxDQUFBOztBQ0FBLE9BQU8sQ0FBQyxNQUFSLENBQWdCLGNB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QUFPLENBQUMsTUFBUixDQUFnQixnQkFBaEIsQ0FDQSxDQUFDLE1BREQsQ0FDUSxTQUFDLGtCQUFELEdBQUE7QUFDTixFQUFBLGtCQUFrQixDQUFDLGdCQUFuQixDQUFxQyxJQUFyQyxDQUFBLENBQUE7U0FDQSxrQkFBa0IsQ0FBQywwQkFBbkIsQ0FBQSxFQUZNO0FBQUEsQ0FEUixDQUFBLENBQUE7O0FDQUEsT0FBTyxDQUFDLE1BQVIsQ0FBZ0IsZ0JBQWhCLENBQ0EsQ0FBQyxNQURELENBQ1EsU0FBQyxpQkFBRCxHQUFBO0FBQ04sRUFBQSxpQkFBaUIsQ0FBQyxTQUFsQixDQUE0QixJQUE1QixDQUFBLENBQUE7U0FDQSxpQkFBaUIsQ0FBQyxVQUFsQixDQUE4QixHQUE5QixFQUZNO0FBQUEsQ0FEUixDQUFBLENBQUE7O0FDQUE7QUFBQTs7Ozs7Ozs7R0FBQTtBQUFBLE9BVU8sQ0FBQyxNQUFSLENBQWdCLGdCQUFoQixDQUNBLENBQUMsS0FERCxDQUNRLFNBRFIsRUFDa0IsRUFEbEIsQ0FHQSxDQUFDLEdBSEQsQ0FHSyxTQUFDLFVBQUQsRUFBYSxPQUFiLEdBQUE7U0FDSCxVQUFVLENBQUMsT0FBWCxHQUFxQixRQURsQjtBQUFBLENBSEwsQ0FWQSxDQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiMjIypcbiAgQG5nZG9jIG1vZHVsZVxuICBAbmFtZSBlZHQtZGVtb1xuICBAbW9kdWxlIGVkdC1kZW1vXG4gIEBkZXNjcmlwdGlvblxuXG4gIFRoaXMgbW9kdWxlIHJlcXVpcmVzIGFsbCBzdWJtb2R1bGVzIG9mIHlvdXIgYXBwXG4jIyNcblxuYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vJywgW1xuICAnbmdNYXRlcmlhbCdcbiAgJ2VkdC1kZW1vLnV0aWxzJ1xuICAnZWR0LWRlbW8uZWR0J1xuXVxuIiwiIyMjKlxuICBAbmdkb2MgbW9kdWxlXG4gIEBuYW1lIGVkdC1kZW1vLmxhbmRpbmdcbiAgQG1vZHVsZSBlZHQtZGVtby5sYW5kaW5nXG4gIEBkZXNjcmlwdGlvblxuXG4gIExhbmRpbmcgcGFnZSBvZiB0aGUgYXBwbGljYXRpb24uXG4jIyNcblxuYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCcsIFtcbiAgJ25nJ1xuICAndWkucm91dGVyJ1xuICAncGFzY2FscHJlY2h0LnRyYW5zbGF0ZSdcbl1cbiIsIiMjIypcbiAgQG5nZG9jIG1vZHVsZVxuICBAbmFtZSBib2lsZXJwbGF0ZS51dGlsc1xuICBAbW9kdWxlIGJvaWxlcnBsYXRlLnV0aWxzXG4gIEBkZXNjcmlwdGlvblxuXG4gIFRoaXMgbW9kdWxlIGNvbnRhaW5zIGhlbHBlcnMgYW5kIGdsb2JhbCBjb25maWd1cmF0aW9uIHJlcXVpcmVkIGJ5IHlvdXIgYXBwXG4jIyNcblxuYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLnV0aWxzJywgW1xuICAnbmcnXG4gICd1aS5yb3V0ZXInXG4gICdwYXNjYWxwcmVjaHQudHJhbnNsYXRlJ1xuXVxuIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCdcbi5jb25zdGFudCAnQkFTRV9BUElfVVJMJywgJ2h0dHA6Ly9hcGktZWR0LXBvbnRzLnNlY3VyZW0uZXUvJyIsImFuZ3VsYXIubW9kdWxlICdlZHQtZGVtby5lZHQnXG4uY29uZmlnICgkc3RhdGVQcm92aWRlcikgLT5cbiAgJHN0YXRlUHJvdmlkZXJcbiAgLnN0YXRlICdlZHQnLFxuICAgIHVybDogJy8/ZGVwJ1xuICAgIGNvbnRyb2xsZXI6ICAnQ291cnNlTGlzdEN0cmwnXG4gICAgdGVtcGxhdGVVcmw6ICdlZHQvdmlld3Mvdmlldy5odG1sJ1xuIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCdcbi5jb25maWcgKCR0cmFuc2xhdGVQcm92aWRlcikgLT5cbiAgJHRyYW5zbGF0ZVByb3ZpZGVyLnRyYW5zbGF0aW9ucyAnZW4nLFxuICAgIEhPTUVfVElUTEU6ICdXZWxjb21lJ1xuICAgIEhPTUVfVEVYVDogJ1RoaXMgaXMgdGhlIGJlZ2lubmluZyBvZiBhbiBleHRyYW9yZGluYXJ5IGFwcC4uLidcblxuICAkdHJhbnNsYXRlUHJvdmlkZXIudHJhbnNsYXRpb25zICdmcicsXG4gICAgSE9NRV9USVRMRTogJ0JpZW52ZW51ZSdcbiAgICBIT01FX1RFWFQ6ICdDZWNpIGVzdCBsZSBjb21tZW5jZW1lbnQgZFxcJ3VuZSBhcHBsaSBleHRyYW9yZGluYWlyZS4uLidcbiIsImFuZ3VsYXIubW9kdWxlICdlZHQtZGVtby5lZHQnXG4uY29udHJvbGxlciAnQ291cnNlTGlzdEN0cmwnLCAoXG4gICRzY29wZVxuICAkc3RhdGVQYXJhbXNcbiAgJG1kRGlhbG9nXG4gIENvdXJzZUZhY3RvcnlcbiAgRGVwYXJ0bWVudExpc3RFeHRyYWN0b3JcbikgLT5cblxuICAkc2NvcGUuY3VycmVudERlcGFydG1lbnQgPSBudWxsXG4gICRzY29wZS5jdXJyZW50RGF0ZSA9IG5ldyBEYXRlKClcbiAgJHNjb3BlLmVycm9yTm9OZXR3b3JrID0gZmFsc2VcblxuICBhbGVydE5vTmV0d29yayA9ICRtZERpYWxvZy5hbGVydCgpXG4gIC50aXRsZSgnRXJyZXVyIHLDqXNlYXUnKVxuICAuY29udGVudCgnSW1wb3NzaWJsZSBkZSByw6ljdXDDqXJlciBsYSBsaXN0ZSBkZXMgY291cnMgIScpXG4gIC5hcmlhTGFiZWwoJ05ldHdvcmsgZXJyb3InKVxuICAub2soJ0RvbW1hZ2UgOignKVxuXG4gICRzY29wZS5sb2FkQ291cnNlcyA9ICgpIC0+XG4gICAgQ291cnNlRmFjdG9yeS5maW5kQWxsKClcbiAgICAuc3VjY2VzcyAoZGF0YSkgLT5cbiAgICAgICRzY29wZS5lcnJvck5vTmV0d29yayA9IGZhbHNlXG5cbiAgICAgICRzY29wZS5jb3Vyc2VzID0gZGF0YVxuICAgICAgY29uc29sZS5sb2cgXCJGb3VuZCBcIiskc2NvcGUuY291cnNlcy5sZW5ndGgrXCIgY291cnNlc1wiXG5cbiAgICAgICRzY29wZS5kZXBhcnRtZW50cyA9IERlcGFydG1lbnRMaXN0RXh0cmFjdG9yLmV4dHJhY3QgJHNjb3BlLmNvdXJzZXNcbiAgICAgIGNvbnNvbGUubG9nIFwiRm91bmQgXCIrJHNjb3BlLmRlcGFydG1lbnRzLmxlbmd0aCtcIiBkZXBhcnRtZW50c1wiXG5cbiAgICAgICMgU2V0IHRoZSBwcmUtc2VsZWN0ZWQgZGVwYXJ0bWVudFxuICAgICAgJHNjb3BlLmN1cnJlbnREZXBhcnRtZW50ID0gJHN0YXRlUGFyYW1zLmRlcFxuXG4gICAgLmVycm9yICgpIC0+XG4gICAgICAkbWREaWFsb2cuc2hvdyggYWxlcnROb05ldHdvcmsgKVxuICAgICAgJHNjb3BlLmVycm9yTm9OZXR3b3JrID0gdHJ1ZVxuXG4gICRzY29wZS5kZXBhcnRtZW50RmlsdGVyID0gKGNvdXJzZSkgLT5cbiAgICAhJHNjb3BlLmN1cnJlbnREZXBhcnRtZW50IG9yIGNvdXJzZS5kZXBhcnRtZW50ID09ICRzY29wZS5jdXJyZW50RGVwYXJ0bWVudFxuXG4gICRzY29wZS5wYXN0Q291cnNlRmlsdGVyID0gKGNvdXJzZSkgLT5cbiAgICAhJHNjb3BlLnByZWZzLmhpZGVQYXN0Q291cnNlcyBvciBjb3Vyc2UudGltZV9lbmQgPiAkc2NvcGUuY3VycmVudERhdGVcblxuICAjIENhbGwgdGhlIEFQSVxuICAkc2NvcGUubG9hZENvdXJzZXMoKVxuIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCdcbi5jb250cm9sbGVyICdQYXJhbWV0ZXJzQ3RybCcsIChcbiAgICAkc2NvcGVcbiAgICAkc3RhdGVQYXJhbXNcbiAgICAkbWREaWFsb2dcbiAgICAkbWRTaWRlbmF2XG4gICAgJHRpbWVvdXRcbiAgKSAtPlxuXG4gICMgSW5pdGlhbGl6ZSB0aGUgcHJlZmVyZW5jZXNcbiAgJHNjb3BlLnByZWZzID1cbiAgICBoaWRlUGFzdENvdXJzZXMgPSBmYWxzZVxuXG4gICRzY29wZS50b2dnbGVTaWRlYmFyID0gKCkgLT5cbiAgICAkbWRTaWRlbmF2KCdsZWZ0JykudG9nZ2xlKClcbiIsImFuZ3VsYXIubW9kdWxlICdlZHQtZGVtby5lZHQnXG4uZmFjdG9yeSAnQ291cnNlRmFjdG9yeScsIChcbiAgJHJvb3RTY29wZVxuICAkaHR0cFxuICBCQVNFX0FQSV9VUkxcbikgLT5cblxuICBmaW5kQWxsID0gKGRhdGUgPSBudWxsKSAtPlxuXG4gICAgcGFyYW1zID1cbiAgICAgIGRhdGU6IGRhdGUgb3IgbW9tZW50KCkuZm9ybWF0ICdERC9NTS9ZWVlZJ1xuXG4gICAgJGh0dHAoXG4gICAgICBtZXRob2Q6ICAgJ0dFVCdcbiAgICAgIHVybDogICAgICAgQkFTRV9BUElfVVJMKydjb3Vyc2VzJ1xuICAgICAgcGFyYW1zOiAgICBwYXJhbXNcbiAgICApXG4gICAgLnN1Y2Nlc3MgKGRhdGEpIC0+XG4gICAgICBkYXRhXG5cbiAgZmluZEJ5RGVwYXJ0bWVudCA9IChkZXBhcnRtZW50Q29kZSwgZGF0ZSA9IG51bGwpIC0+XG5cbiAgICBwYXJhbXMgPVxuICAgICAgZGF0ZTogZGF0ZSBvciBtb21lbnQoKS5mb3JtYXQgJ0REL01NL1lZWVknXG4gICAgICBkZXBhcnRtZW50OiBkZXBhcnRtZW50Q29kZVxuXG4gICAgJGh0dHAoXG4gICAgICBtZXRob2Q6ICAgJ0dFVCdcbiAgICAgIHVybDogICAgICAgQkFTRV9BUElfVVJMKydjb3Vyc2VzJ1xuICAgICAgcGFyYW1zOiAgICBwYXJhbXNcbiAgICApXG4gICAgLnN1Y2Nlc3MgKGRhdGEpIC0+XG4gICAgICBkYXRhXG5cbiAgZmluZEFsbDogZmluZEFsbFxuICBmaW5kQnlEZXBhcnRtZW50OiBmaW5kQnlEZXBhcnRtZW50XG4iLCJhbmd1bGFyLm1vZHVsZSAnZWR0LWRlbW8uZWR0J1xuLnNlcnZpY2UgJ0RlcGFydG1lbnRMaXN0RXh0cmFjdG9yJywgKCkgLT5cbiAgZXh0cmFjdCA9IChjb3Vyc2VzKSAtPlxuICAgICMgV2UgbmVlZCB0byBleHRyYWN0IHRoZSBkZXBhcnRtZW50IGxpc3QgZnJvbSB0aGUgY291cnNlcyBsaXN0XG4gICAgZGVwYXJ0bWVudHMgPSBbXVxuICAgIGZvciBjb3Vyc2UgaW4gY291cnNlc1xuICAgICAgaWYgZGVwYXJ0bWVudHMuaW5kZXhPZihjb3Vyc2UuZGVwYXJ0bWVudCkgaXMgLTFcbiAgICAgICAgZGVwYXJ0bWVudHMucHVzaCBjb3Vyc2UuZGVwYXJ0bWVudFxuXG4gICAgIyBSZXR1cm4gdGhlIGRlcGFydG1lbnRzIGxpc3RcbiAgICBkZXBhcnRtZW50c1xuXG4gIGV4dHJhY3Q6IGV4dHJhY3RcbiIsImFuZ3VsYXIubW9kdWxlICdlZHQtZGVtby51dGlscydcbi5jb25maWcgKCR0cmFuc2xhdGVQcm92aWRlcikgLT5cbiAgJHRyYW5zbGF0ZVByb3ZpZGVyLmZhbGxiYWNrTGFuZ3VhZ2UgJ2VuJ1xuICAkdHJhbnNsYXRlUHJvdmlkZXIuZGV0ZXJtaW5lUHJlZmVycmVkTGFuZ3VhZ2UoKVxuIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLnV0aWxzJ1xuLmNvbmZpZyAoJGxvY2F0aW9uUHJvdmlkZXIpIC0+XG4gICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSB0cnVlXG4gICRsb2NhdGlvblByb3ZpZGVyLmhhc2hQcmVmaXggJyEnXG4iLCIjIyMqXG4gIEBuZ2RvYyBvYmplY3RcbiAgQG5hbWUgc3RvcmFnZVxuICBAbW9kdWxlIGVkdC1kZW1vLnV0aWxzXG4gIEBkZXNjcmlwdGlvblxuXG4gIFRoaXMgdmFsdWUgb2JqZWN0IGlzIGFuIGFwcGxpY2F0aW9uLXdpZGUgZGF0YS1zdG9yZS5cbiAgSXQncyBwdWJsaXNoZWQgaW4gYCRyb290U2NvcGVgIGZvciBlYXN5LWFjY2VzcyBpbiB2aWV3cy5cbiMjI1xuXG5hbmd1bGFyLm1vZHVsZSAnZWR0LWRlbW8udXRpbHMnXG4udmFsdWUgJ3N0b3JhZ2UnLCB7fVxuXG4ucnVuICgkcm9vdFNjb3BlLCBzdG9yYWdlKSAtPlxuICAkcm9vdFNjb3BlLnN0b3JhZ2UgPSBzdG9yYWdlXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=