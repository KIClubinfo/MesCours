
/**
  @ngdoc module
  @name edt-demo
  @module edt-demo
  @description

  This module requires all submodules of your app
 */
'use strict';
angular.module('edt-demo', ['ngMaterial', 'edt-demo.utils', 'edt-demo.edt']);


/**
  @ngdoc module
  @name edt-demo.landing
  @module edt-demo.landing
  @description

  Landing page of the application.
 */
angular.module('edt-demo.edt', ['ng', 'ui.router']);


/**
  @ngdoc module
  @name boilerplate.utils
  @module boilerplate.utils
  @description

  This module contains helpers and global configuration required by your app
 */
angular.module('edt-demo.utils', ['ng', 'ui.router']);

angular.module('edt-demo.edt').constant('BASE_API_URL', 'http://api-edt-ponts.securem.eu/');

angular.module('edt-demo.edt').config(function($stateProvider, $urlRouterProvider) {
  $stateProvider.state('edt', {
    url: '/?dep',
    controller: 'CourseListCtrl',
    templateUrl: 'edt/views/view.html'
  });
  return $urlRouterProvider.otherwise('/');
});

angular.module('edt-demo.edt').controller('CourseListCtrl', function($scope, $stateParams, $mdDialog, CourseFactory, DepartmentListExtractor) {
  var alertNoNetwork;
  $scope.currentDepartment = null;
  $scope.currentDate = new Date();
  $scope.errorNoNetwork = false;
  alertNoNetwork = $mdDialog.alert().title('Erreur réseau').content('Impossible de récupérer la liste des cours !').ariaLabel('Network error').ok('Dommage :(');
  $scope.loadCourses = function() {
    return CourseFactory.findAll().success(function(data) {
      $scope.errorNoNetwork = false;
      $scope.courses = data;
      console.log("Found " + $scope.courses.length + " courses");
      $scope.departments = DepartmentListExtractor.extract($scope.courses);
      console.log("Found " + $scope.departments.length + " departments");
      return $scope.currentDepartment = $stateParams.dep;
    }).error(function() {
      $mdDialog.show(alertNoNetwork);
      return $scope.errorNoNetwork = true;
    });
  };
  $scope.departmentFilter = function(course) {
    return !$scope.currentDepartment || course.department === $scope.currentDepartment;
  };
  $scope.pastCourseFilter = function(course) {
    return !$scope.prefs.hidePastCourses || new Date(Date.parse(course.time_end)) > $scope.currentDate;
  };
  return $scope.loadCourses();
});

angular.module('edt-demo.edt').controller('ParametersCtrl', function($scope, $stateParams, $mdDialog, $mdSidenav, $timeout) {
  $scope.prefs = {
    hidePastCourses: true
  };
  return $scope.toggleSidebar = function() {
    return $mdSidenav('left').toggle();
  };
});

angular.module('edt-demo.edt').factory('CourseFactory', function($rootScope, $http, BASE_API_URL) {
  var findAll, findByDepartment;
  findAll = function(date) {
    var params;
    if (date == null) {
      date = null;
    }
    params = {
      date: date || moment().format('DD/MM/YYYY')
    };
    return $http({
      method: 'GET',
      url: BASE_API_URL + 'courses',
      params: params
    }).success(function(data) {
      return data;
    });
  };
  findByDepartment = function(departmentCode, date) {
    var params;
    if (date == null) {
      date = null;
    }
    params = {
      date: date || moment().format('DD/MM/YYYY'),
      department: departmentCode
    };
    return $http({
      method: 'GET',
      url: BASE_API_URL + 'courses',
      params: params
    }).success(function(data) {
      return data;
    });
  };
  return {
    findAll: findAll,
    findByDepartment: findByDepartment
  };
});

angular.module('edt-demo.edt').service('DepartmentListExtractor', function() {
  var extract;
  extract = function(courses) {
    var course, departments, _i, _len;
    departments = [];
    for (_i = 0, _len = courses.length; _i < _len; _i++) {
      course = courses[_i];
      if (departments.indexOf(course.department) === -1) {
        departments.push(course.department);
      }
    }
    return departments;
  };
  return {
    extract: extract
  };
});


/**
  @ngdoc object
  @name storage
  @module edt-demo.utils
  @description

  This value object is an application-wide data-store.
  It's published in `$rootScope` for easy-access in views.
 */
angular.module('edt-demo.utils').value('storage', {}).run(function($rootScope, storage) {
  return $rootScope.storage = storage;
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uY29mZmVlIiwiZWR0L21vZHVsZS5jb2ZmZWUiLCJ1dGlscy9tb2R1bGUuY29mZmVlIiwiZWR0L2NvbmZpZy9jb25maWcuY29mZmVlIiwiZWR0L2NvbmZpZy9yb3V0ZXMuY29mZmVlIiwiZWR0L2NvbnRyb2xsZXJzL2NvdXJzZV9saXN0LmNvZmZlZSIsImVkdC9jb250cm9sbGVycy9wYXJhbWV0ZXJzLmNvZmZlZSIsImVkdC9zZXJ2aWNlcy9jb3Vyc2VfZmFjdG9yeS5jb2ZmZWUiLCJlZHQvc2VydmljZXMvZGVwYXJ0bWVudF9saXN0X2V4dHJhY3Rvci5jb2ZmZWUiLCJ1dGlscy9jb25maWcvc3RvcmFnZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTs7Ozs7OztHQUFBO0FBQUEsWUFBQSxDQUFBO0FBQUEsT0FXTyxDQUFDLE1BQVIsQ0FBZ0IsVUFBaEIsRUFBMkIsQ0FDeEIsWUFEd0IsRUFFeEIsZ0JBRndCLEVBR3hCLGNBSHdCLENBQTNCLENBWEEsQ0FBQTs7QUNBQTtBQUFBOzs7Ozs7O0dBQUE7QUFBQSxPQVNPLENBQUMsTUFBUixDQUFnQixjQUFoQixFQUErQixDQUM1QixJQUQ0QixFQUU1QixXQUY0QixDQUEvQixDQVRBLENBQUE7O0FDQUE7QUFBQTs7Ozs7OztHQUFBO0FBQUEsT0FTTyxDQUFDLE1BQVIsQ0FBZ0IsZ0JBQWhCLEVBQWlDLENBQzlCLElBRDhCLEVBRTlCLFdBRjhCLENBQWpDLENBVEEsQ0FBQTs7QUNBQSxPQUFPLENBQUMsTUFBUixDQUFnQixjQUFoQixDQUNBLENBQUMsUUFERCxDQUNXLGNBRFgsRUFDMkIsa0NBRDNCLENBQUEsQ0FBQTs7QUNBQSxPQUFPLENBQUMsTUFBUixDQUFnQixjQUFoQixDQUNBLENBQUMsTUFERCxDQUNRLFNBQUMsY0FBRCxFQUFpQixrQkFBakIsR0FBQTtBQUNOLEVBQUEsY0FDQSxDQUFDLEtBREQsQ0FDUSxLQURSLEVBRUU7QUFBQSxJQUFBLEdBQUEsRUFBTSxPQUFO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S0EsQ0FBQyxPQUxELENBS1MsU0FBQyxJQUFELEdBQUE7YUFDUCxLQURPO0lBQUEsQ0FMVCxFQU5pQjtFQUFBLENBYm5CLENBQUE7U0EyQkE7QUFBQSxJQUFBLE9BQUEsRUFBUyxPQUFUO0FBQUEsSUFDQSxnQkFBQSxFQUFrQixnQkFEbEI7SUFqQ3dCO0FBQUEsQ0FEMUIsQ0FBQSxDQUFBOztBQ0FBLE9BQU8sQ0FBQyxNQUFSLENBQWdCLGNBQWhCLENBQ0EsQ0FBQyxPQURELENBQ1UseUJBRFYsRUFDb0MsU0FBQSxHQUFBO0FBQ2xDLE1BQUEsT0FBQTtBQUFBLEVBQUEsT0FBQSxHQUFVLFNBQUMsT0FBRCxHQUFBO0FBRVIsUUFBQSw2QkFBQTtBQUFBLElBQUEsV0FBQSxHQUFjLEVBQWQsQ0FBQTtBQUNBLFNBQUEsOENBQUE7MkJBQUE7QUFDRSxNQUFBLElBQUcsV0FBVyxDQUFDLE9BQVosQ0FBb0IsTUFBTSxDQUFDLFVBQTNCLENBQUEsS0FBMEMsQ0FBQSxDQUE3QztBQUNFLFFBQUEsV0FBVyxDQUFDLElBQVosQ0FBaUIsTUFBTSxDQUFDLFVBQXhCLENBQUEsQ0FERjtPQURGO0FBQUEsS0FEQTtXQU1BLFlBUlE7RUFBQSxDQUFWLENBQUE7U0FVQTtBQUFBLElBQUEsT0FBQSxFQUFTLE9BQVQ7SUFYa0M7QUFBQSxDQURwQyxDQUFBLENBQUE7O0FDQUE7QUFBQTs7Ozs7Ozs7R0FBQTtBQUFBLE9BVU8sQ0FBQyxNQUFSLENBQWdCLGdCQUFoQixDQUNBLENBQUMsS0FERCxDQUNRLFNBRFIsRUFDa0IsRUFEbEIsQ0FHQSxDQUFDLEdBSEQsQ0FHSyxTQUFDLFVBQUQsRUFBYSxPQUFiLEdBQUE7U0FDSCxVQUFVLENBQUMsT0FBWCxHQUFxQixRQURsQjtBQUFBLENBSEwsQ0FWQSxDQUFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiMjIypcbiAgQG5nZG9jIG1vZHVsZVxuICBAbmFtZSBlZHQtZGVtb1xuICBAbW9kdWxlIGVkdC1kZW1vXG4gIEBkZXNjcmlwdGlvblxuXG4gIFRoaXMgbW9kdWxlIHJlcXVpcmVzIGFsbCBzdWJtb2R1bGVzIG9mIHlvdXIgYXBwXG4jIyNcblxuJ3VzZSBzdHJpY3QnXG5cbmFuZ3VsYXIubW9kdWxlICdlZHQtZGVtbycsIFtcbiAgJ25nTWF0ZXJpYWwnXG4gICdlZHQtZGVtby51dGlscydcbiAgJ2VkdC1kZW1vLmVkdCdcbl1cbiIsIiMjIypcbiAgQG5nZG9jIG1vZHVsZVxuICBAbmFtZSBlZHQtZGVtby5sYW5kaW5nXG4gIEBtb2R1bGUgZWR0LWRlbW8ubGFuZGluZ1xuICBAZGVzY3JpcHRpb25cblxuICBMYW5kaW5nIHBhZ2Ugb2YgdGhlIGFwcGxpY2F0aW9uLlxuIyMjXG5cbmFuZ3VsYXIubW9kdWxlICdlZHQtZGVtby5lZHQnLCBbXG4gICduZydcbiAgJ3VpLnJvdXRlcidcbl1cbiIsIiMjIypcbiAgQG5nZG9jIG1vZHVsZVxuICBAbmFtZSBib2lsZXJwbGF0ZS51dGlsc1xuICBAbW9kdWxlIGJvaWxlcnBsYXRlLnV0aWxzXG4gIEBkZXNjcmlwdGlvblxuXG4gIFRoaXMgbW9kdWxlIGNvbnRhaW5zIGhlbHBlcnMgYW5kIGdsb2JhbCBjb25maWd1cmF0aW9uIHJlcXVpcmVkIGJ5IHlvdXIgYXBwXG4jIyNcblxuYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLnV0aWxzJywgW1xuICAnbmcnXG4gICd1aS5yb3V0ZXInXG5dXG4iLCJhbmd1bGFyLm1vZHVsZSAnZWR0LWRlbW8uZWR0J1xuLmNvbnN0YW50ICdCQVNFX0FQSV9VUkwnLCAnaHR0cDovL2FwaS1lZHQtcG9udHMuc2VjdXJlbS5ldS8nIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCdcbi5jb25maWcgKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIpIC0+XG4gICRzdGF0ZVByb3ZpZGVyXG4gIC5zdGF0ZSAnZWR0JyxcbiAgICB1cmw6ICcvP2RlcCdcbiAgICBjb250cm9sbGVyOiAgJ0NvdXJzZUxpc3RDdHJsJ1xuICAgIHRlbXBsYXRlVXJsOiAnZWR0L3ZpZXdzL3ZpZXcuaHRtbCdcblxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlICcvJ1xuIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCdcbi5jb250cm9sbGVyICdDb3Vyc2VMaXN0Q3RybCcsIChcbiAgJHNjb3BlXG4gICRzdGF0ZVBhcmFtc1xuICAkbWREaWFsb2dcbiAgQ291cnNlRmFjdG9yeVxuICBEZXBhcnRtZW50TGlzdEV4dHJhY3RvclxuKSAtPlxuXG4gICRzY29wZS5jdXJyZW50RGVwYXJ0bWVudCA9IG51bGxcbiAgJHNjb3BlLmN1cnJlbnREYXRlID0gbmV3IERhdGUoKVxuICAkc2NvcGUuZXJyb3JOb05ldHdvcmsgPSBmYWxzZVxuXG4gIGFsZXJ0Tm9OZXR3b3JrID0gJG1kRGlhbG9nLmFsZXJ0KClcbiAgLnRpdGxlKCdFcnJldXIgcsOpc2VhdScpXG4gIC5jb250ZW50KCdJbXBvc3NpYmxlIGRlIHLDqWN1cMOpcmVyIGxhIGxpc3RlIGRlcyBjb3VycyAhJylcbiAgLmFyaWFMYWJlbCgnTmV0d29yayBlcnJvcicpXG4gIC5vaygnRG9tbWFnZSA6KCcpXG5cbiAgJHNjb3BlLmxvYWRDb3Vyc2VzID0gKCkgLT5cbiAgICBDb3Vyc2VGYWN0b3J5LmZpbmRBbGwoKVxuICAgIC5zdWNjZXNzIChkYXRhKSAtPlxuICAgICAgJHNjb3BlLmVycm9yTm9OZXR3b3JrID0gZmFsc2VcblxuICAgICAgJHNjb3BlLmNvdXJzZXMgPSBkYXRhXG4gICAgICBjb25zb2xlLmxvZyBcIkZvdW5kIFwiKyRzY29wZS5jb3Vyc2VzLmxlbmd0aCtcIiBjb3Vyc2VzXCJcblxuICAgICAgJHNjb3BlLmRlcGFydG1lbnRzID0gRGVwYXJ0bWVudExpc3RFeHRyYWN0b3IuZXh0cmFjdCAkc2NvcGUuY291cnNlc1xuICAgICAgY29uc29sZS5sb2cgXCJGb3VuZCBcIiskc2NvcGUuZGVwYXJ0bWVudHMubGVuZ3RoK1wiIGRlcGFydG1lbnRzXCJcblxuICAgICAgIyBTZXQgdGhlIHByZS1zZWxlY3RlZCBkZXBhcnRtZW50XG4gICAgICAkc2NvcGUuY3VycmVudERlcGFydG1lbnQgPSAkc3RhdGVQYXJhbXMuZGVwXG5cbiAgICAuZXJyb3IgKCkgLT5cbiAgICAgICRtZERpYWxvZy5zaG93KCBhbGVydE5vTmV0d29yayApXG4gICAgICAkc2NvcGUuZXJyb3JOb05ldHdvcmsgPSB0cnVlXG5cbiAgJHNjb3BlLmRlcGFydG1lbnRGaWx0ZXIgPSAoY291cnNlKSAtPlxuICAgICEkc2NvcGUuY3VycmVudERlcGFydG1lbnQgb3IgY291cnNlLmRlcGFydG1lbnQgPT0gJHNjb3BlLmN1cnJlbnREZXBhcnRtZW50XG5cbiAgJHNjb3BlLnBhc3RDb3Vyc2VGaWx0ZXIgPSAoY291cnNlKSAtPlxuICAgICEkc2NvcGUucHJlZnMuaGlkZVBhc3RDb3Vyc2VzIG9yIG5ldyBEYXRlKERhdGUucGFyc2UoY291cnNlLnRpbWVfZW5kKSkgPiAkc2NvcGUuY3VycmVudERhdGVcblxuICAjIENhbGwgdGhlIEFQSVxuICAkc2NvcGUubG9hZENvdXJzZXMoKVxuIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCdcbi5jb250cm9sbGVyICdQYXJhbWV0ZXJzQ3RybCcsIChcbiAgICAkc2NvcGVcbiAgICAkc3RhdGVQYXJhbXNcbiAgICAkbWREaWFsb2dcbiAgICAkbWRTaWRlbmF2XG4gICAgJHRpbWVvdXRcbiAgKSAtPlxuXG4gICMgSW5pdGlhbGl6ZSB0aGUgcHJlZmVyZW5jZXNcbiAgJHNjb3BlLnByZWZzID1cbiAgICBoaWRlUGFzdENvdXJzZXM6IHRydWVcblxuICAkc2NvcGUudG9nZ2xlU2lkZWJhciA9ICgpIC0+XG4gICAgJG1kU2lkZW5hdignbGVmdCcpLnRvZ2dsZSgpXG4iLCJhbmd1bGFyLm1vZHVsZSAnZWR0LWRlbW8uZWR0J1xuLmZhY3RvcnkgJ0NvdXJzZUZhY3RvcnknLCAoXG4gICRyb290U2NvcGVcbiAgJGh0dHBcbiAgQkFTRV9BUElfVVJMXG4pIC0+XG5cbiAgZmluZEFsbCA9IChkYXRlID0gbnVsbCkgLT5cblxuICAgIHBhcmFtcyA9XG4gICAgICBkYXRlOiBkYXRlIG9yIG1vbWVudCgpLmZvcm1hdCAnREQvTU0vWVlZWSdcblxuICAgICRodHRwKFxuICAgICAgbWV0aG9kOiAgICdHRVQnXG4gICAgICB1cmw6ICAgICAgIEJBU0VfQVBJX1VSTCsnY291cnNlcydcbiAgICAgIHBhcmFtczogICAgcGFyYW1zXG4gICAgKVxuICAgIC5zdWNjZXNzIChkYXRhKSAtPlxuICAgICAgZGF0YVxuXG4gIGZpbmRCeURlcGFydG1lbnQgPSAoZGVwYXJ0bWVudENvZGUsIGRhdGUgPSBudWxsKSAtPlxuXG4gICAgcGFyYW1zID1cbiAgICAgIGRhdGU6IGRhdGUgb3IgbW9tZW50KCkuZm9ybWF0ICdERC9NTS9ZWVlZJ1xuICAgICAgZGVwYXJ0bWVudDogZGVwYXJ0bWVudENvZGVcblxuICAgICRodHRwKFxuICAgICAgbWV0aG9kOiAgICdHRVQnXG4gICAgICB1cmw6ICAgICAgIEJBU0VfQVBJX1VSTCsnY291cnNlcydcbiAgICAgIHBhcmFtczogICAgcGFyYW1zXG4gICAgKVxuICAgIC5zdWNjZXNzIChkYXRhKSAtPlxuICAgICAgZGF0YVxuXG4gIGZpbmRBbGw6IGZpbmRBbGxcbiAgZmluZEJ5RGVwYXJ0bWVudDogZmluZEJ5RGVwYXJ0bWVudFxuIiwiYW5ndWxhci5tb2R1bGUgJ2VkdC1kZW1vLmVkdCdcbi5zZXJ2aWNlICdEZXBhcnRtZW50TGlzdEV4dHJhY3RvcicsICgpIC0+XG4gIGV4dHJhY3QgPSAoY291cnNlcykgLT5cbiAgICAjIFdlIG5lZWQgdG8gZXh0cmFjdCB0aGUgZGVwYXJ0bWVudCBsaXN0IGZyb20gdGhlIGNvdXJzZXMgbGlzdFxuICAgIGRlcGFydG1lbnRzID0gW11cbiAgICBmb3IgY291cnNlIGluIGNvdXJzZXNcbiAgICAgIGlmIGRlcGFydG1lbnRzLmluZGV4T2YoY291cnNlLmRlcGFydG1lbnQpIGlzIC0xXG4gICAgICAgIGRlcGFydG1lbnRzLnB1c2ggY291cnNlLmRlcGFydG1lbnRcblxuICAgICMgUmV0dXJuIHRoZSBkZXBhcnRtZW50cyBsaXN0XG4gICAgZGVwYXJ0bWVudHNcblxuICBleHRyYWN0OiBleHRyYWN0XG4iLCIjIyMqXG4gIEBuZ2RvYyBvYmplY3RcbiAgQG5hbWUgc3RvcmFnZVxuICBAbW9kdWxlIGVkdC1kZW1vLnV0aWxzXG4gIEBkZXNjcmlwdGlvblxuXG4gIFRoaXMgdmFsdWUgb2JqZWN0IGlzIGFuIGFwcGxpY2F0aW9uLXdpZGUgZGF0YS1zdG9yZS5cbiAgSXQncyBwdWJsaXNoZWQgaW4gYCRyb290U2NvcGVgIGZvciBlYXN5LWFjY2VzcyBpbiB2aWV3cy5cbiMjI1xuXG5hbmd1bGFyLm1vZHVsZSAnZWR0LWRlbW8udXRpbHMnXG4udmFsdWUgJ3N0b3JhZ2UnLCB7fVxuXG4ucnVuICgkcm9vdFNjb3BlLCBzdG9yYWdlKSAtPlxuICAkcm9vdFNjb3BlLnN0b3JhZ2UgPSBzdG9yYWdlXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=